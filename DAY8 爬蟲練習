# 抓取 PTT 電影版的網頁原始碼(HTML)
import urllib.request as req
url="https://www.ptt.cc/bbs/Gossiping/index.html"
# 建立一個 Request 物件. 附加 Request Headers 的資訊
request=req.Request(url, headers={
    "cookie":"over18=1", # 模仿年齡限制確認
    "User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.93 Safari/537.36"
})
with req.urlopen(request) as response:
    data=response.read().decode("utf-8")
    
# 解析原始碼, 取得每篇文章的標題
import bs4 # 載入pip install beautifulsoup4套件 這個套件叫bs4 請他幫我們做解析
root=bs4.BeautifulSoup(data, "html.parser") # 讓 beautifulsoup 協助我們解析 HTML 格式文件
print(root.title.string) # 抓標籤再來抓到底下的文字
# titles=root.find("div", class_="title") # 尋找 class="title" 的 div 標籤
titles=root.find_all("div", class_="title") # 尋找所有 class="title" 的 div 標籤
# print(titles.a.string) # 需搭配for迴圈才可以一次只抓文字的部分
for title in titles:
    if title.a != None: # 如果標題包含有 a 標籤(沒有被刪除)則印出來
        print(title.a.string) # 只抓文字的部分
